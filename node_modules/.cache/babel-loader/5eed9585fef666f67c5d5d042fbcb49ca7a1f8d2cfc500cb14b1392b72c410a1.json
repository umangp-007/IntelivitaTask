{"ast":null,"code":"// import React, { useEffect, useState } from 'react';\n// import { useRecoilState } from 'recoil';\n// import { recordsState } from '../../recoil/atom';\n\n// const RecordForm = ({ editRecordId, setEditRecordId }) => {\n//   const [records, setRecords] = useRecoilState(recordsState);\n//   const [email, setEmail] = useState('');\n//   const [name, setName] = useState('');\n\n//   const handleFileUpload = (event) => {\n//     const file = event.target.files[0];\n//     const reader = new FileReader();\n\n//     reader.onload = (e) => {\n//       const jsonData = JSON.parse(e.target.result);\n//       const existingEmails = new Set(records.map(record => record.email));\n//       const mergedRecords = [...records];\n\n//       jsonData.forEach(record => {\n//         if (!existingEmails.has(record.email)) {\n//           mergedRecords.push(record);\n//           existingEmails.add(record.email);\n//         }\n//       });\n\n//       setRecords(mergedRecords);\n//     };\n\n//     if (file) {\n//       reader.readAsText(file);\n//     }\n//   };\n\n//   const handleUpdateRecord = () => {\n//     const emailExists = records.some(record => record.email === email && record.id !== editRecordId);\n//     if (emailExists) {\n//       alert(\"Email must be unique!\");\n//       return;\n//     }\n//     setRecords(records.map(record => record.id === editRecordId ? { ...record, email, name } : record));\n//     resetForm(); \n//   };\n\n//   const resetForm = () => {\n//     setEditRecordId(null);\n//     setEmail('');\n//     setName('');\n//   };\n\n//   useEffect(() => {\n//     if (editRecordId) {\n//       const recordToEdit = records.find(record => record.id === editRecordId);\n//       if (recordToEdit) {\n//         setName(recordToEdit.name);\n//         setEmail(recordToEdit.email);\n//       }\n//     }\n//   }, [editRecordId, records]);\n\n//   return (\n//     <div>\n//       <input type=\"file\" accept=\".json\" onChange={handleFileUpload} />\n//       <div>\n//         <input \n//           type=\"text\" \n//           placeholder=\"Name\" \n//           value={name} \n//           onChange={(e) => setName(e.target.value)} \n//         />\n//         <input \n//           type=\"email\" \n//           placeholder=\"Email\" \n//           value={email} \n//           onChange={(e) => setEmail(e.target.value)} \n//         />\n//         <button onClick={handleUpdateRecord}>Update Record</button>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default RecordForm;","map":{"version":3,"names":[],"sources":["/home/mohan-muthanna/Desktop/Umang/perctical/src/components/RecordForm/RecordForm.jsx"],"sourcesContent":["// import React, { useEffect, useState } from 'react';\n// import { useRecoilState } from 'recoil';\n// import { recordsState } from '../../recoil/atom';\n\n// const RecordForm = ({ editRecordId, setEditRecordId }) => {\n//   const [records, setRecords] = useRecoilState(recordsState);\n//   const [email, setEmail] = useState('');\n//   const [name, setName] = useState('');\n\n//   const handleFileUpload = (event) => {\n//     const file = event.target.files[0];\n//     const reader = new FileReader();\n\n//     reader.onload = (e) => {\n//       const jsonData = JSON.parse(e.target.result);\n//       const existingEmails = new Set(records.map(record => record.email));\n//       const mergedRecords = [...records];\n\n//       jsonData.forEach(record => {\n//         if (!existingEmails.has(record.email)) {\n//           mergedRecords.push(record);\n//           existingEmails.add(record.email);\n//         }\n//       });\n\n//       setRecords(mergedRecords);\n//     };\n\n//     if (file) {\n//       reader.readAsText(file);\n//     }\n//   };\n\n//   const handleUpdateRecord = () => {\n//     const emailExists = records.some(record => record.email === email && record.id !== editRecordId);\n//     if (emailExists) {\n//       alert(\"Email must be unique!\");\n//       return;\n//     }\n//     setRecords(records.map(record => record.id === editRecordId ? { ...record, email, name } : record));\n//     resetForm(); \n//   };\n\n//   const resetForm = () => {\n//     setEditRecordId(null);\n//     setEmail('');\n//     setName('');\n//   };\n\n//   useEffect(() => {\n//     if (editRecordId) {\n//       const recordToEdit = records.find(record => record.id === editRecordId);\n//       if (recordToEdit) {\n//         setName(recordToEdit.name);\n//         setEmail(recordToEdit.email);\n//       }\n//     }\n//   }, [editRecordId, records]);\n\n//   return (\n//     <div>\n//       <input type=\"file\" accept=\".json\" onChange={handleFileUpload} />\n//       <div>\n//         <input \n//           type=\"text\" \n//           placeholder=\"Name\" \n//           value={name} \n//           onChange={(e) => setName(e.target.value)} \n//         />\n//         <input \n//           type=\"email\" \n//           placeholder=\"Email\" \n//           value={email} \n//           onChange={(e) => setEmail(e.target.value)} \n//         />\n//         <button onClick={handleUpdateRecord}>Update Record</button>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default RecordForm;\n"],"mappings":"AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}